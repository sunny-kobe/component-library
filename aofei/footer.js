var ZYFooter = {
    gameComDes: '健康游戏忠告：抵制不良游戏&nbsp;&nbsp;&nbsp;拒绝盗版游戏&nbsp;&nbsp;&nbsp;注意自我保护&nbsp;&nbsp;&nbsp;谨防受骗上当&nbsp;&nbsp;&nbsp;适度游戏益脑&nbsp;&nbsp;&nbsp;沉迷游戏伤身&nbsp;&nbsp;&nbsp;合理安排时间&nbsp;&nbsp;&nbsp;享受健康生活',
    style: '.ZY-footer{overflow:hidden;padding:40px 0;min-width:1200px;font-size:0}.ZY-footer .f-wrap{margin:0 auto;width:1000px}.ZY-footer .f-a{font-family:"\5FAE\8F6F\96C5\9ED1",tahoma,sans-serif;font-size:13px;font-weight:400;font-style:normal;white-space:nowrap;text-decoration:none}.ZY-footer .f-a[href]{cursor:pointer}.ZY-footer .f-p,.ZY-footer .f-rich-text{margin:0;line-height:2.2}.ZY-footer .f-rich-text{font-size:13px}.ZY-footer .f-top{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-end;align-items:flex-end;-webkit-box-align:end;-webkit-box-pack:justify;-ms-flex-align:end;-ms-flex-pack:justify;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-justify-content:space-between;justify-content:space-between}.ZY-footer .f-top+.f-center:before{display:block;margin:18px 0 16px;height:1px;content:""}.ZY-footer .f-top .f-t-l{white-space:nowrap}.ZY-footer .f-top .f-t-l .f-item,.ZY-footer .f-top .f-t-l .f-line{display:inline-block;vertical-align:middle}.ZY-footer .f-top .f-t-l .f-line{margin:0 16px;width:1px;height:40px}.ZY-footer .f-top .f-t-r{margin-top:10px}.ZY-footer .f-top .f-t-r .f-a{text-decoration:underline}.ZY-footer .f-top .f-t-r .f-a+.f-a{margin-left:16px}.ZY-footer .f-center .f-list{overflow:hidden}.ZY-footer .f-center .f-list .f-a{display:inline-block;position:relative;margin-right:25px;vertical-align:middle}.ZY-footer .f-center .f-list .f-a:before{display:inline-block;position:absolute;top:50%;left:-13px;width:1px;height:18px;-webkit-transform:translateY(-50%);transform:translateY(-50%);content:""}.ZY-footer .f-center .f-list .f-a:first-child:before{display:none}.ZY-footer .f-center .f-list .f-a:last-child{margin-right:0}.ZY-footer .f-bottom .f-p:last-child{line-height:2.5}.ZY-footer .f-bottom .f-a+.f-a{margin-left:5px}.ZY-footer .f-bottom .f-a-img{display:inline-block;text-decoration:none}.ZY-footer .f-bottom .f-a-img+.f-a-img{margin-left:12px}.ZY-footer .f-bottom .f-a-img:hover{text-decoration:none}.ZY-footer .f-bottom .f-a-img img{display:inline-block;width:auto;height:20px;vertical-align:middle}.ZY-footer .f-bottom .f-a-img i{margin-left:4px;font-size:13px;font-style:normal;vertical-align:middle}.ZY-footer.dark{background-color:#000}.ZY-footer.dark .f-a{color:#fff}.ZY-footer.dark .f-a:before{background-color:#a1a1a1}.ZY-footer.dark .f-a[href]:hover{color:#0089bc}.ZY-footer.dark .f-rich-text{color:#fff}.ZY-footer.dark .f-rich-text a{text-decoration:none;color:#fff}.ZY-footer.dark .f-rich-text a[href]:hover{color:#0089bc}.ZY-footer.dark .f-top .f-t-l .f-line{background-color:rgba(66,78,102,.6)}.ZY-footer.dark .f-top .f-t-r .f-a{color:#0089bc}.ZY-footer.dark .f-top .f-t-r .f-a[href]:hover{color:#09ade8}.ZY-footer.dark .f-top+.f-center:before{background-color:rgba(83,97,128,.9)}.ZY-footer.dark .f-bottom .f-a-img{color:#fff}.ZY-footer.dark .f-bottom .f-a-img[href]:hover{color:#0089bc}.ZY-footer.light{background-color:#fff}.ZY-footer.light .f-a{color:#100f0f}.ZY-footer.light .f-a:before{background-color:#a1a1a1}.ZY-footer.light .f-a[href]:hover{color:#0089bc}.ZY-footer.light .f-rich-text{color:#100f0f}.ZY-footer.light .f-rich-text a{text-decoration:none;color:#100f0f}.ZY-footer.light .f-rich-text a[href]:hover{color:#0089bc}.ZY-footer.light .f-top .f-t-l .f-line{background-color:#e3e3e3}.ZY-footer.light .f-top .f-t-r .f-a{color:#0089bc}.ZY-footer.light .f-top .f-t-r .f-a[href]:hover{color:#00a8e5}.ZY-footer.light .f-top+.f-center:before{background-color:#cecece}.ZY-footer.light .f-bottom .f-a-img{color:#100f0f}.ZY-footer.light .f-bottom .f-a-img[href]:hover{color:#0089bc}.ZY-footer.f-mobile{padding:15px;min-width:0}.ZY-footer.f-mobile .f-wrap{width:auto}.ZY-footer.f-mobile .f-p{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;line-height:2;-webkit-align-items:center;align-items:center;-webkit-box-align:center;-webkit-box-pack:center;-ms-flex-align:center;-ms-flex-pack:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-justify-content:center;justify-content:center}.ZY-footer.f-mobile .f-p.f-nav .f-a{text-decoration:underline}.ZY-footer.f-mobile .f-p .f-a{font-size:10px}.ZY-footer.f-mobile .f-p .f-a+.f-a{margin-left:5px}.ZY-footer.f-mobile .f-p .f-a-img{display:inline-block;font-size:10px;text-decoration:none}.ZY-footer.f-mobile .f-p .f-a-img+.f-a-img{margin-left:12px}.ZY-footer.f-mobile .f-p .f-a-img img{display:inline-block;width:auto;height:20px;vertical-align:middle}.ZY-footer.f-mobile .f-p .f-a-img i{font-style:normal;vertical-align:middle}.ZY-footer.f-mobile .f-rich-text{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:10px;line-height:2;text-align:center;-webkit-align-items:center;align-items:center;-webkit-box-align:center;-webkit-box-pack:center;-ms-flex-align:center;-ms-flex-pack:center;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-justify-content:center;justify-content:center}.ZY-footer.f-mobile.dark{background-color:#202020}.ZY-footer.f-mobile.dark .f-p .f-a,.ZY-footer.f-mobile.dark .f-p .f-a-img,.ZY-footer.f-mobile.dark .f-rich-text,.ZY-footer.f-mobile.dark .f-rich-text a{color:#c6c6c6}.ZY-footer.f-mobile.light{background-color:#fff}.ZY-footer.f-mobile.light .f-p .f-a,.ZY-footer.f-mobile.light .f-p .f-a-img,.ZY-footer.f-mobile.light .f-rich-text,.ZY-footer.f-mobile.light .f-rich-text a{color:#c9c9c9}.ZY-age{position:absolute;z-index:1}.ZY-age img{max-width:200px}', // 样式代码
    data: {
        copyrightData: '', // 版权信息
        style: 'dark', // 风格['dark','light']
        wrapId: 'ZY_footer', // 容器Id
        source: '', // 数据源
        path: '', // 数据路径
        device: '', // pc/mobile
    },
    setHtmlForPC: function (data) {
        // 渲染pc结构
        // 版块一：f-top
        let topTpl = '';
        // f-t-l
        let topL = '';
        if (data.hasOwnProperty('logo')) {
            for (let i = 0; i < data.logo.length; i++) {
                let item = data.logo[i];
                let href = '';
                if (item.href != '') {
                    href = "target='_blank' href=" + item.href;
                }
                topL += "<a class='f-item' " + href + ">\
                            <img src='" + this.deleteHttpOrHttps(item.src) + "' alt='" + item.txt + "'>\
                        </a>";
                if (i < data.logo.length - 1) {
                    topL += "<div class='f-line'></div>";
                }
            }
        }

        // f-t-r
        let topR = '';
        if (data.hasOwnProperty('nav')) {
            for (let i = 0; i < data.nav.length; i++) {
                let item = data.nav[i];
                let href = '';
                if (item.href != '') {
                    href = "target='_blank' href=" + item.href;
                }
                topR += "<a class='f-a' " + href + ">" + item.txt + "</a>";
            }
        }

        topTpl = "<div class='f-top'>\
                    <div class='f-t-l'>" + topL + "</div>\
                    <nav class='f-t-r'>" + topR + "</nav>\
                </div>";

        // 版块二：f-center
        let centerTpl = '';
        let richInfo = '';
        if (data.hasOwnProperty('contactPc') && data.contactPc !== '') {
            richInfo = "<p class='f-rich-text'>" + data.contactPc + "</p>";
        }
        let cList = '';
        if (data.hasOwnProperty('info')) {
            for (let i = 0; i < data.info.length; i++) {
                let item = data.info[i];
                let href = '';
                if (item.href != '') {
                    href = "target='_blank' href=" + item.href;
                }
                cList += "<a class='f-a' " + href + ">" + item.txt + "</a>";
            }
        }

        centerTpl = "<div class='f-center'>\
                        <p class='f-p'>\
                            <a class='f-a'>" + this.gameComDes + "</a>\
                        </p>\
                        " + richInfo + "\
                        <p class='f-p f-list'>" + cList + "</p>\
                    </div>"

        // 版块三：f-bottom
        let bottomTpl = '';
        // f-b-l
        let bottomL = "<a class='f-a'>Copyright© " + "</a>";
        if (data.hasOwnProperty('logo')) {
            for (let i = 0; i < data.logo.length; i++) {
                let item = data.logo[i];
                let href = '';
                if (item.href != '') {
                    href = "target='_blank' href=" + item.href;
                }
                bottomL += "<a class='f-a' " + href + ">" + item.txt + "</a>";
            }
        }

        // f-b-r
        let bottomR = '';
        if (data.hasOwnProperty('icon')) {
            for (let i = 0; i < data.icon.length; i++) {
                let item = data.icon[i];
                let href = '';
                let txt = '';
                if (item.href != '') {
                    href = "target='_blank' href=" + item.href;
                }
                if (item.txt != '') {
                    txt = "<i>" + item.txt + "</i>";
                }
                bottomR += "<a class='f-a-img' title='" + item.alt + "' " + href + ">\
                                <img src='" + this.deleteHttpOrHttps(item.src) + "' height='20' alt='" + item.alt + "'>\
                                " + txt + "\
                            </a>";
            }
        }

        bottomTpl = "<div class='f-bottom'>\
                        <p class='f-p'>" + bottomL + "</p>\
                        <p class='f-p'>" + bottomR + "</p>\
                    </div>";

        // 版权
        let footerTpl = "<style>" + this.style + "</style><div class='ZY-footer " + this.data.style + "'>\
            <div class='f-wrap'>" + topTpl + centerTpl + bottomTpl + "</div>\
        </div>";

        return footerTpl;
    },
    setHtmlForMobile: function (data) {
        // 渲染mobile结构
        let nav = '';
        if (data.hasOwnProperty('nav')) {
            for (let i = 0; i < data.nav.length; i++) {
                let item = data.nav[i];
                if (item.hasOwnProperty('mobileNeedShow') && item.mobileNeedShow == '1') {
                    let href = '';
                    if (item.href != '') {
                        href = "target='_blank' href=" + item.href;
                    }
                    nav += "<a class='f-a' " + href + ">" + item.txt + "</a>";
                }
            }
        }

        let info = '';
        if (data.hasOwnProperty('info')) {
            for (let i = 0; i < data.info.length; i++) {
                let item = data.info[i];
                if (item.hasOwnProperty('mobileNeedShow') && item.mobileNeedShow == '1') {
                    let href = '';
                    if (item.href != '') {
                        href = "target='_blank' href=" + item.href;
                    }
                    info += "<a class='f-a' " + href + ">" + item.txt + "</a>";
                }
            }
        }

        let copyright = "<a class='f-a'>Copyright© " + "</a>";
        if (data.hasOwnProperty('logo')) {
            for (let i = 0; i < data.logo.length; i++) {
                let item = data.logo[i];
                let href = '';
                if (item.href != '') {
                    href = "target='_blank' href=" + item.href;
                }
                copyright += "<a class='f-a' " + href + ">" + item.txt + "</a>";
            }
        }

        let richInfo = '';
        if (data.hasOwnProperty('contactMobile') && data.contactMobile !== '') {
            richInfo = "<p class='f-rich-text'>" + data.contactMobile + "</p>";
        }

        let iconList = '';
        if (data.hasOwnProperty('icon')) {
            for (let i = 0; i < data.icon.length; i++) {
                let item = data.icon[i];
                if (item.hasOwnProperty('mobileNeedShow') && item.mobileNeedShow == '1') {
                    let href = '';
                    let txt = '';
                    if (item.href != '') {
                        href = "target='_blank' href=" + item.href;
                    }
                    if (item.txt != '') {
                        txt = "<i>" + item.txt + "</i>";
                    }
                    iconList += "<a class='f-a-img' title='" + item.alt + "' " + href + ">\
                                    <img src='" + item.src + "' height='20' alt='" + item.alt + "'>\
                                    " + txt + "\
                                </a>";
                }
            }
        }

        // 版权
        let footerTpl = "<style>" + this.style + "</style><div class='ZY-footer f-mobile " + this.data.style + "'>\
                            <div class='f-wrap'>\
                                <p class='f-p f-nav'>" + nav + "</p>\
                                <p class='f-p'>" + info + "</p>\
                                <p class='f-p'>" + copyright + "</p>\
                                " + richInfo + "\
                                <p class='f-p'>" + iconList + "</p>\
                            </div>\
                        </div>";

        return footerTpl;
    },
    setFooter: function () {
        // 站点和游戏数据整合
        let data = this.data.copyrightData;
        if (!data) {
            console.error('无效的域名，请核对后联系管理员添加该域名信息。');
            return;
        }

        if (this.pcOrMobile() === 'mobile') {
            document.getElementById(this.data.wrapId).innerHTML = this.setHtmlForMobile(data);
        } else {
            document.getElementById(this.data.wrapId).innerHTML = this.setHtmlForPC(data);
        }
    },
    getData: function (key, tongji) {
        let e = document.createElement("script");
        // let src = this.data.source + "/video/commonFooter/" + key + ".js";
        let src = this.data.source + this.data.path + key + ".js";
        if (tongji) {
            src += '?tj=' + tongji;
        }
        e.setAttribute("src", src);
        let jsList = document.getElementsByTagName('script');
        let loaded = false;
        for (let i = 0; i < jsList.length; i++) {
            if (this.deleteHttpOrHttps(jsList[i].src) === src) {
                loaded = true;
                continue;
            }
        }

        // 判断是否已经加载过footDatajs
        if (!loaded) {
            document.body.appendChild(e);
            e.onload = function () {
                ZYFooter.data.copyrightData = _footerData;
                ZYFooter.setFooter();
            };
            e.onerror = function () {
                console.warn("配置的key值有误，获取版号信息错误。");
            };
        } else {
            ZYFooter.data.copyrightData = _footerData;
            ZYFooter.setFooter();
        }
    },
    deleteHttpOrHttps: function (src) {
        // 处理外链地址（目前只处理图片、js路径判断）
        let reg = new RegExp(/^https?:/);
        let s = src.replace(reg, "");
        return s;
    },
    pcOrMobile: function () {
        // 根据pc或是mobile返回对应的html结构
        let userAgentInfo = navigator.userAgent.toLowerCase();
        let isMobile = userAgentInfo.match(/(iphone|ipod|android|ios|ipad|backerry|webos|symbian|windows phone|phone|mobile|webos|incognito|webmate|bada|nokia|lg|ucweb|skyfire)/i);
        let fixIpad = navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1; // 兼容：iPad-设置-Safar浏览器-请求桌面网站-所有网站（开启）

        if (this.data.device === 'mobile') {
            return 'mobile';
        }
        if (this.data.device === 'pc') {
            return 'pc';
        }

        if (isMobile || fixIpad) {
            return 'mobile';
        } else {
            return 'pc';
        }
    },
    init: function (id) {
        // 初始化
        let ID = id || 'ZY_footer';

        if (!document.getElementById(ID)) {
            console.warn('需先初始化 ' + ID + ' 容器。');
            return;
        }

        this.data.wrapId = ID;
        this.data.style = document.getElementById(ID).getAttribute('data-color') || 'dark';
        this.data.key = document.getElementById(ID).getAttribute('data-key') || '';
        this.data.source = document.getElementById(ID).getAttribute('data-source') || '//resource.15166.com';
        this.data.path = document.getElementById(ID).getAttribute('data-path') || '/video/commonFooter/';
        this.data.tongji = document.getElementById(ID).getAttribute('data-tongji') || '';
        this.data.device = document.getElementById(ID).getAttribute('data-type') || '';

        if (this.data.key == '') {
            console.warn('footer未设置key值，与管理员确认后填写。');
            return;
        }
        ZYFooter.getData(this.data.key, this.data.tongji);
    }
};
